"use strict";(self.webpackChunklapaa=self.webpackChunklapaa||[]).push([[500],{1500:function(e,n,r){r.r(n),r.d(n,{default:function(){return A}});var s=r(3433),t=r(4165),a=r(5861),l=r(9439),i=r(2791),o=r(7309),c=r(7027),u=r(6106),d=r(914),h=r(376),m=r(5848),f=r(1730),p=r(9286),x=r(1933),Z=r(7145),j=r(814),v=r(7615),y=r(1645),g=r(184),w=Z.Z.Option,b=(0,i.forwardRef)((function(e,n){var r=e.visible,s=e.onCancel,t=e.onOk,a=e.rolesData;return(0,g.jsx)(j.Z,{title:"Add User",open:r,onOk:t,onCancel:s,okText:"Submit",cancelText:"Cancel",width:800,style:{top:20},bodyStyle:{maxHeight:"70vh",overflowY:"auto",overflowX:"hidden"},children:(0,g.jsx)(v.Z,{ref:n,layout:"vertical",name:"add_entry_form",children:(0,g.jsx)(u.Z,{gutter:16,children:(0,g.jsxs)(d.Z,{xs:24,sm:24,md:24,children:[(0,g.jsxs)(y.Z,{title:"User Details",children:[(0,g.jsxs)(u.Z,{gutter:16,children:[(0,g.jsx)(d.Z,{span:12,children:(0,g.jsx)(v.Z.Item,{name:"full_name",label:"Full name",rules:[{required:!0,message:"Please enter the Full Name"}],children:(0,g.jsx)(h.Z,{placeholder:"Enter full name"})})}),(0,g.jsx)(d.Z,{span:12,children:(0,g.jsx)(v.Z.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,message:"Please enter a phone number"}],children:(0,g.jsx)(h.Z,{placeholder:"Enter a Phone number"})})})]}),(0,g.jsxs)(u.Z,{gutter:16,children:[(0,g.jsx)(d.Z,{span:12,children:(0,g.jsx)(v.Z.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter a valid Email Address"}],children:(0,g.jsx)(h.Z,{placeholder:"Enter an Email Address"})})}),(0,g.jsx)(d.Z,{span:12,children:(0,g.jsx)(v.Z.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter a password"}],children:(0,g.jsx)(h.Z,{type:"password",placeholder:"Enter a password"})})})]})]}),(0,g.jsx)(u.Z,{gutter:16,children:(0,g.jsx)(d.Z,{span:12,children:(0,g.jsx)(v.Z.Item,{name:"roles",label:"Role",rules:[{required:!0,message:"Please select a Role"}],children:(0,g.jsx)(Z.Z,{placeholder:"Select a Role",children:Array.isArray(a)&&a.length>0?a.map((function(e){return(0,g.jsx)(w,{value:e.id,children:e.name},e.id)})):(0,g.jsx)(w,{disabled:!0,children:"No Roles Defined"})})})})})]})})})})})),k=r(2426),P=r.n(k),_=r(7689),A=function(){var e=(0,i.useState)(!1),n=(0,l.Z)(e,2),r=n[0],Z=n[1],j=(0,i.useState)([]),v=(0,l.Z)(j,2),y=v[0],w=v[1],k=(0,i.useState)(null),A=(0,l.Z)(k,2),C=A[0],E=A[1],F=(0,i.useState)(""),S=(0,l.Z)(F,2),I=S[0],U=S[1],N=(0,_.s0)(),R=(0,i.useRef)(null),O=[{title:"Full Name",dataIndex:"full_name",key:"full_name"},{title:"Phone",dataIndex:"phone_no",key:"phone_no"},{title:"Email",dataIndex:"email",key:"email"},{title:"Roles",dataIndex:"is_mobile_user",key:"is_mobile_user",render:function(e){return e?"Field Agent":"Web User"}},{title:"Created At",dataIndex:"created_at",key:"created_at",render:function(e){return e?P()(e).format("MMMM D, YYYY h:mm A"):"N/A"}},{title:"Actions",key:"actions",render:function(e,n){return(0,g.jsx)(o.ZP,{type:"link",onClick:function(){return q(n)},children:"Manage"})}}];(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.ZP)("/user/users/list/","GET",{});case 3:"success"===(n=e.sent).status?E(n.data):c.ZP.error("Failed to load Users"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c.ZP.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.ZP)("/user/role/list/","GET",{});case 3:"success"===(n=e.sent).status?w(n.data):c.ZP.error("Failed to load roles and permissions"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c.ZP.error("Error fetching roles and permissions: "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();n(),e()}),[]);var q=function(e){N("/solichain/usermanagement/systemusers/webusers/manage/".concat(e.id))},D=C?C.filter((function(e){return e.full_name.toLowerCase().includes(I.toLowerCase())})):[];return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"users",children:[(0,g.jsxs)(u.Z,{justify:"space-between",style:{marginBottom:"25px"},children:[(0,g.jsx)(d.Z,{children:(0,g.jsx)(h.Z,{placeholder:"Search User",onChange:function(e){U(e.target.value)},prefix:(0,g.jsx)(f.Z,{}),style:{width:200}})}),(0,g.jsx)(d.Z,{children:(0,g.jsx)(o.ZP,{type:"primary",icon:(0,g.jsx)(p.Z,{}),onClick:function(){Z(!0)},children:"Add User"})})]}),(0,g.jsx)(m.Z,{dataSource:D,columns:O,rowKey:"id"}),(0,g.jsx)(b,{visible:r,onCancel:function(){Z(!1)},onOk:function(){R.current.validateFields().then((function(e){var n={full_name:e.full_name,email:e.email,phone_no:e.phone,roles:[e.roles],password:e.password,photo:"".concat("https://lapaa.syknown.tech/api/","/static/profile/user1")};(0,x.ZP)("/user/register/","POST",n).then((function(n){"success"===n.status?(c.ZP.success("User Agent ".concat(e.full_name," added successfully")),E((function(e){return[].concat((0,s.Z)(e),[n.data])}))):console.log(JSON.stringify(n))})).catch((function(e){c.ZP.error("Failed to add User"),console.log(e)})),R.current.resetFields(),Z(!1)})).catch((function(e){console.log("Validate Failed:",e)}))},rolesData:y,ref:R})]})})}}}]);
//# sourceMappingURL=500.f636731c.chunk.js.map